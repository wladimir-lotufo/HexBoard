<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peity Charts - Design System</title>
    <link rel="stylesheet" href="../../../../../Vendor/fontawesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../../../../Vendor/bootstrap/dist/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="../../../../../Vendor/animate.css/animate.min.css">
    <link rel="stylesheet" href="../../../../../Icons/pe-icon-7-stroke/css/pe-icon-7-stroke.css">
    <link rel="stylesheet" href="../../../../../Content/custom.css">
    <link rel="stylesheet" href="../../../../../Content/spinner1.css">
    <link rel="stylesheet" href="../../../../../Vendor/toastr214/build/toastr.css">
    <link rel="stylesheet" href="../../../../../Content/style.css">
    <link rel="stylesheet" href="../../../../../Content/style-custom.css">
    <style>
        .ds-component-section {
            display: block;
        }

        .ds-content-header h1 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .ds-content-header p {
            font-size: 16px;
            color: #676a6c;
            margin-bottom: 30px;
        }

        .ds-section {
            margin-bottom: 40px;
        }

        .ds-section-title {
            font-size: 18px;
            font-weight: 600;
            color: #676a6c;
            margin-bottom: 15px;
            border-bottom: 1px solid #e7eaec;
            padding-bottom: 10px;
        }

        .ds-example {
            background-color: #f9f9f9;
            border: 1px solid #e7eaec;
            border-radius: 4px;
            padding: 20px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100px;
        }

        .ds-code {
            background-color: #2b2b2b;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 4px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.6;
        }

        .ds-code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #444;
        }

        .ds-code-title {
            font-size: 12px;
            color: #999;
            text-transform: uppercase;
        }

        .ds-code-copy {
            background-color: #444;
            color: #fff;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 11px;
            transition: background-color 0.2s;
        }

        .ds-code-copy:hover {
            background-color: #555;
        }

        .ds-list {
            list-style-type: disc;
            padding-left: 20px;
            color: #676a6c;
        }

        .ds-list li {
            margin-bottom: 8px;
        }

        /* Peity specific alignment */
        .peity {
            vertical-align: middle;
        }
    </style>
</head>

<body>
    <div id="viw_Component" class="content-full">
        <div class="row">
            <div class="col-lg-12">
                <div class="hpanel">
                    <!-- Header Section -->
                    <div id="PanelHeader" class="panel-heading">
                        <div class="row">
                            <div class="col-lg-12">
                                <h4 class="font-extra-bold text-primary">Peity Charts</h4>
                                <small class="text-muted">Gráficos inline (sparklines) de pizza, rosca, barra e linha
                                    para visualização rápida de dados.</small>
                            </div>
                        </div>
                    </div>

                    <!-- Content Section -->
                    <div id="PanelBody" class="panel-body tooltip-demo">

                        <!-- TabPanel -->
                        <ul id="pnl_PizzachartTabs" class="nav nav-tabs">
                            <li class="active">
                                <a data-toggle="tab" href="#tab_Exemplo">
                                    <i class="fa fa-eye text-primary fa-lg"></i> Exemplo
                                </a>
                            </li>
                            <li>
                                <a data-toggle="tab" href="#tab_HTML">
                                    <i class="fa fa-code text-primary fa-lg"></i> HTML
                                </a>
                            </li>
                            <li>
                                <a data-toggle="tab" href="#tab_Propriedades">
                                    <i class="fa fa-cog text-primary fa-lg"></i> Propriedades
                                </a>
                            </li>
                        </ul>

                        <div class="tab-content">
                            <br />

                            <!-- Tab Exemplo -->
                            <div id="tab_Exemplo" class="tab-pane active">
                                <!-- Configuration Section -->
                                <div class="ds-section">
                                    <h2 class="ds-section-title">Configuração</h2>
                                    <div
                                        style="background-color: #fff; border: 1px solid #e7eaec; border-radius: 4px; padding: 20px; margin: 20px 0;">

                                        <!-- Context Selector -->
                                        <div class="row"
                                            style="margin-bottom: 20px; padding-bottom: 20px; border-bottom: 2px solid #e7eaec;">
                                            <div class="col-md-12">
                                                <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 10px;">
                                                    <i class="fa fa-lightbulb-o text-warning"></i> Contextos Comuns
                                                </h4>
                                                <select id="chart-context-selector" class="form-control"
                                                    style="max-width: 400px;">
                                                    <option value="">-- Selecione um contexto --</option>
                                                    <option value="pie-default">Pizza Padrão (2 valores, verde/cinza)
                                                    </option>
                                                    <option value="profit-loss">Receita vs Despesa (Verde/Cinza, 2 val)
                                                    </option>
                                                    <option value="donut-default">Rosca Padrão (3 valores, success)
                                                    </option>
                                                    <option value="bar-top10">Top 10 Despesas (Barra, Descendente)
                                                    </option>
                                                    <option value="bar-dashboard">Tendência Dashboard (Barra Inline)
                                                    </option>
                                                    <option value="line-sparkline">Sparkline Linha (Tendência)</option>
                                                    <option value="bar-inline">Gráfico de Barras Genérico (5 valores)
                                                    </option>
                                                </select>
                                                <small class="text-muted">Selecione um contexto para aplicar a
                                                    configuração automaticamente</small>
                                            </div>
                                        </div>

                                        <!-- Data Input -->
                                        <div class="row" style="margin-bottom: 20px;">
                                            <div class="col-md-12">
                                                <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 5px;">
                                                    Valores (separados por vírgula)</h4>
                                                <input type="text" id="config-values" class="form-control" value="60,40"
                                                    placeholder="Ex: 5,3,9,6,5">
                                            </div>
                                        </div>

                                        <!-- Configuration Columns -->
                                        <div class="row">
                                            <!-- Column 1: Tipo -->
                                            <div class="col-md-3">
                                                <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 10px;">Tipo
                                                </h4>
                                                <div class="checkbox"><label><input type="checkbox" class="config-type"
                                                            value="pie" checked> Pizza (Pie)</label></div>
                                                <div class="checkbox"><label><input type="checkbox" class="config-type"
                                                            value="donut"> Rosca (Donut)</label></div>
                                                <div class="checkbox"><label><input type="checkbox" class="config-type"
                                                            value="bar"> Barra (Bar)</label></div>
                                                <div class="checkbox"><label><input type="checkbox" class="config-type"
                                                            value="line"> Linha (Line)</label></div>
                                            </div>

                                            <!-- Column 2: Cores -->
                                            <div class="col-md-3">
                                                <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 10px;">
                                                    Cores</h4>
                                                <div class="checkbox"><label><input type="checkbox"
                                                            class="config-colors" value="default" checked> Plataforma
                                                        (Verde/Cinza)</label></div>
                                                <div class="checkbox"><label><input type="checkbox"
                                                            class="config-colors" value="success"> Success
                                                        (Verdes)</label></div>
                                                <div class="checkbox"><label><input type="checkbox"
                                                            class="config-colors" value="info"> Info (Azuis)</label>
                                                </div>
                                                <div class="checkbox"><label><input type="checkbox"
                                                            class="config-colors" value="warning"> Warning
                                                        (Laranjas)</label></div>
                                            </div>

                                            <!-- Column 3: Tamanho -->
                                            <div class="col-md-3">
                                                <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 10px;">
                                                    Tamanho</h4>
                                                <div class="checkbox"><label><input type="checkbox" class="config-size"
                                                            value="24"> Pequeno (Inline, 24px)</label></div>
                                                <div class="checkbox"><label><input type="checkbox" class="config-size"
                                                            value="64"> Médio (64px)</label></div>
                                                <div class="checkbox"><label><input type="checkbox" class="config-size"
                                                            value="128" checked> Grande (128px)</label></div>
                                                <div class="checkbox"><label><input type="checkbox" class="config-size"
                                                            value="200"> Extra Grande (200px)</label></div>
                                                <div class="checkbox"><label><input type="checkbox" class="config-size"
                                                            value="250"> Dashboard (250px)</label></div>
                                            </div>

                                            <!-- Column 4: Opções -->
                                            <div class="col-md-3">
                                                <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 10px;">
                                                    Opções</h4>
                                                <div id="options-radius">
                                                    <label style="font-weight: normal; font-size: 12px;">Raio Interno
                                                        (Rosca):</label>
                                                    <input type="range" id="config-inner-radius" min="0" max="100"
                                                        value="40" style="width: 100%;">
                                                    <small id="radius-val" class="text-muted"
                                                        style="display:block; text-align:right;">40px</small>
                                                </div>
                                                <div style="margin-top: 10px;">
                                                    <label
                                                        style="font-weight: normal; font-size: 12px;">Delimitador:</label>
                                                    <select id="config-delimiter" class="form-control input-sm">
                                                        <option value=",">Vírgula (,)</option>
                                                        <option value="/">Barra (/)</option>
                                                        <option value="|">Pipe (|)</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Structure Configuration Row -->
                                        <div class="row"
                                            style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #eee;">
                                            <div class="col-md-12">
                                                <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 10px;">
                                                    Estrutura (Container)</h4>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="checkbox">
                                                    <label>
                                                        <input type="checkbox" id="config-wrap-panel"> Envolver em
                                                        Painel (.hpanel)
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="col-md-4 structure-inputs" style="display:none;">
                                                <div class="form-group">
                                                    <label style="font-weight: normal; font-size: 12px;">Título do
                                                        Gráfico:</label>
                                                    <input type="text" id="config-title" class="form-control input-sm"
                                                        placeholder="Ex: Lucratividade">
                                                </div>
                                            </div>
                                            <div class="col-md-4 structure-inputs" style="display:none;">
                                                <div class="form-group">
                                                    <label style="font-weight: normal; font-size: 12px;">Subtítulo /
                                                        Rodapé:</label>
                                                    <input type="text" id="config-footer" class="form-control input-sm"
                                                        placeholder="Ex: Atualizado hoje">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="ds-section">
                                    <h2 class="ds-section-title">Exemplo Visual</h2>
                                    <div id="chart-container" class="ds-example" style="min-height: 300px;">
                                        <span id="chart-example" class="donut">60,40</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Tab HTML -->
                            <div id="tab_HTML" class="tab-pane">
                                <div class="ds-section">
                                    <h2 class="ds-section-title">Template HTML</h2>
                                    <div class="ds-code">
                                        <div class="ds-code-header">
                                            <span class="ds-code-title">HTML</span>
                                            <button class="ds-code-copy" onclick="copyCode(this)">Copiar</button>
                                        </div>
                                        <pre><code id="html-code">&lt;span class="pie"&gt;60,40&lt;/span&gt;</code></pre>
                                    </div>
                                </div>

                                <div class="ds-section">
                                    <h2 class="ds-section-title">Template JavaScript</h2>
                                    <div class="ds-code">
                                        <div class="ds-code-header">
                                            <span class="ds-code-title">JavaScript</span>
                                            <button class="ds-code-copy" onclick="copyCode(this)">Copiar</button>
                                        </div>
                                        <pre><code id="js-code"></code></pre>
                                    </div>
                                </div>
                            </div>

                            <!-- Tab Propriedades -->
                            <div id="tab_Propriedades" class="tab-pane">
                                <div class="ds-section">
                                    <h2 class="ds-section-title">Biblioteca Peity</h2>
                                    <p>A plataforma utiliza a biblioteca <strong>Peity</strong> para renderizar gráficos
                                        pequenos e simples diretamente a partir de elementos HTML.</p>
                                </div>

                                <div class="ds-section">
                                    <h2 class="ds-section-title">Tipos Suportados</h2>
                                    <ul class="ds-list">
                                        <li><strong>Pie (Pizza)</strong>: Mostra proporções (ex: 1/5). Class: `.pie`
                                        </li>
                                        <li><strong>Donut (Rosca)</strong>: Variação da pizza com furo central. Class:
                                            `.donut` (ou `.pie` com configuração innerRadius)</li>
                                        <li><strong>Bar (Barra)</strong>: Barras verticais simples. Class: `.bar`</li>
                                        <li><strong>Line (Linha)</strong>: Gráfico de linha para tendências. Class:
                                            `.line`</li>
                                    </ul>
                                </div>

                                <div class="ds-section">
                                    <h2 class="ds-section-title">Opções de Configuração</h2>
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Opção</th>
                                                <th>Descrição</th>
                                                <th>Padrão</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>fill</td>
                                                <td>Array de cores hexadecimais</td>
                                                <td>["#62cb31", "#edf0f5"]</td>
                                            </tr>
                                            <tr>
                                                <td>width</td>
                                                <td>Largura do gráfico</td>
                                                <td>24</td>
                                            </tr>
                                            <tr>
                                                <td>height</td>
                                                <td>Altura do gráfico</td>
                                                <td>24</td>
                                            </tr>
                                            <tr>
                                                <td>radius</td>
                                                <td>Raio (para Pizza/Rosca)</td>
                                                <td>8</td>
                                            </tr>
                                            <tr>
                                                <td>innerRadius</td>
                                                <td>Raio interno (para Rosca)</td>
                                                <td>null</td>
                                            </tr>
                                            <tr>
                                                <td>delimiter</td>
                                                <td>Caractere separador de valores</td>
                                                <td>","</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                        </div>
                        <!-- End TabPanel -->

                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../../../../../Scripts/jquery-3.6.0.min.js"></script>
    <script src="../../../../../Vendor/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="../../../../../Vendor/peity/jquery.peity.min.js"></script>
    <script>
        function copyCode(btn) {
            var codeBlock = btn.parentElement.nextElementSibling;
            var code = codeBlock.innerText;
            var tempInput = document.createElement("textarea");
            tempInput.value = code;
            document.body.appendChild(tempInput);
            tempInput.select();
            document.execCommand("copy");
            document.body.removeChild(tempInput);
            var originalText = btn.innerText;
            btn.innerText = "Copiado!";
            setTimeout(function () { btn.innerText = originalText; }, 2000);
        }

        $(document).ready(function () {
            // Color palettes
            var colorPalettes = {
                'default': ["#62cb31", "#edf0f5"], // Green, Light Gray
                'success': ["#1ab394", "#a3e1d4", "#62c9b5"], // Green shades
                'info': ["#23c6c8", "#a4e2e3", "#64d4d6"], // Blue shades
                'warning': ["#f8ac59", "#fcd9b8", "#fac184"] // Orange shades
            };

            // Context presets
            var contexts = {
                'pie-default': {
                    type: 'pie',
                    values: '60,40',
                    colors: 'default',
                    size: '128',
                    innerRadius: 0,
                    wrap: false
                },
                'profit-loss': {
                    type: 'pie',
                    values: '1000, 800', // Receita vs Despesa example
                    colors: 'default', // Platform green/gray
                    size: '200',
                    innerRadius: 0,
                    wrap: true,
                    title: 'Lucratividade',
                    footer: 'Receita vs Despesa'
                },
                'donut-default': {
                    type: 'donut',
                    values: '40,30,30',
                    colors: 'success',
                    size: '200',
                    innerRadius: 60,
                    wrap: false
                },
                'bar-top10': {
                    type: 'bar',
                    values: '10,9,8,7,6,5,4,3,2,1', // Descending Top 10
                    colors: 'default',
                    size: '128',
                    innerRadius: null,
                    wrap: true,
                    title: 'Top 10 Despesas'
                },
                'bar-dashboard': {
                    type: 'bar',
                    values: '5,3,9,6,5,9,7,3,5,2', // Dashboard trend
                    colors: 'default',
                    size: '64',
                    innerRadius: null,
                    wrap: true,
                    title: 'Vendas Mensais'
                },
                'line-sparkline': {
                    type: 'line',
                    values: '5,3,9,6,5,9,7,3,5,2',
                    colors: 'default',
                    size: '64',
                    innerRadius: null,
                    wrap: false
                },
                'bar-inline': {
                    type: 'bar',
                    values: '5,3,9,6,5,8,4,2,7,12,6',
                    colors: 'default',
                    size: '64',
                    innerRadius: null,
                    wrap: false
                }
            };

            // Update Chart Function
            // Update Chart Function
            function updateChart() {
                // Get selected UI values
                var classType = $('.config-type:checked').val() || 'pie';
                var colorValues = $('.config-colors:checked').val() || 'default';
                var size = $('.config-size:checked').val() || '128';
                var values = $('#config-values').val();
                var innerRadius = $('#config-inner-radius').val();
                var delimiter = $('#config-delimiter').val();
                var wrapPanel = $('#config-wrap-panel').is(':checked');
                var title = $('#config-title').val();
                var footer = $('#config-footer').val();

                var colors = colorPalettes[colorValues];

                // Toggle visibility of structure inputs
                if (wrapPanel) {
                    $('.structure-inputs').show();
                } else {
                    $('.structure-inputs').hide();
                }

                // Donut specific logic
                if (classType === 'donut') {
                    $('#options-radius').show();
                } else {
                    $('#options-radius').hide();
                }

                // Update visual example
                var $container = $('#chart-container');
                $container.empty(); // Clear everything

                // Chart Element
                // We use a clean span with the values
                var $chartEl = $('<span>')
                    .addClass(classType)
                    .text(values)
                    .attr('data-peity', ''); // Marker

                // Add peity class to ensure it displays if CSS expects it
                $chartEl.addClass('peity');

                var finalHtml = "";

                if (wrapPanel) {
                    // Build HPanel Structure
                    var $hpanel = $('<div>').addClass('hpanel');
                    if (title) {
                        var $heading = $('<div>').addClass('panel-heading');
                        // Optional tools could go here
                        $heading.append($('<h4>').text(title));
                        $hpanel.append($heading);
                    }

                    var $body = $('<div>').addClass('panel-body text-center');
                    $body.append($chartEl);
                    $hpanel.append($body);

                    if (footer) {
                        var $footerEl = $('<div>').addClass('panel-footer').text(footer);
                        $hpanel.append($footerEl);
                    }

                    $container.append($hpanel);

                    // Generate HTML code for panel
                    var panelHtml = '<div class="hpanel">\n';
                    if (title) {
                        panelHtml += '    <div class="panel-heading">\n';
                        panelHtml += '        <h4>' + title + '</h4>\n';
                        panelHtml += '    </div>\n';
                    }
                    panelHtml += '    <div class="panel-body text-center">\n';
                    panelHtml += '        <span class="' + classType + '">' + values + '</span>\n';
                    panelHtml += '    </div>\n';
                    if (footer) {
                        panelHtml += '    <div class="panel-footer">\n';
                        panelHtml += '        ' + footer + '\n';
                        panelHtml += '    </div>\n';
                    }
                    panelHtml += '</div>';
                    finalHtml = panelHtml;

                } else {
                    // Inline Render
                    $container.append($chartEl);
                    finalHtml = '<span class="' + classType + '">' + values + '</span>';
                }

                // Update HTML Code Display
                $('#html-code').text(finalHtml);

                // Peity Options Construction
                var options = {
                    fill: colors,
                    delimiter: delimiter
                };

                // Size mapping
                if (size) {
                    var sizeInt = parseInt(size);
                    options.width = sizeInt;
                    options.height = sizeInt;
                }

                // Inner Radius for Donut
                if (classType === 'donut') {
                    // Peity uses 'pie' type with innerRadius for donuts
                    // But if we call .peity('donut'), it expects specific syntax or aliases.
                    // The standard Peity usage for donut is typically .peity('donut') which aliases to pie w/ defaults?
                    // Let's stick to passing innerRadius explicitly if we can.
                    if (innerRadius) {
                        options.innerRadius = parseInt(innerRadius);
                    }
                }

                if (classType === 'line') {
                    // Line chart specific
                    options.stroke = "#edf0f5";
                    if (colorValues == 'default') {
                        options.fill = "#62cb31";
                    } else if (colors && colors.length > 0) {
                        options.fill = colors[0];
                    }
                }

                // Initialize Peity on the new element
                // Note: The element is inside $container
                $container.find('span.peity').peity(classType, options);

                // Generate JS Code
                var js = '$(".' + classType + '").peity("' + classType + '", ' + JSON.stringify(options, null, 4) + ');';
                $('#js-code').text(js);
            }

            // Apply Context Function
            function applyContext(context) {
                // Apply type
                $('.config-type').prop('checked', false);
                // Map context type to UI value (donut -> donut)
                $('.config-type[value="' + context.type + '"]').prop('checked', true);

                // Apply values
                $('#config-values').val(context.values);

                // Apply colors
                $('.config-colors').prop('checked', false);
                $('.config-colors[value="' + context.colors + '"]').prop('checked', true);

                // Apply size
                $('.config-size').prop('checked', false);
                // Check exact match or default
                var $sizeCb = $('.config-size[value="' + context.size + '"]');
                if ($sizeCb.length) {
                    $sizeCb.prop('checked', true);
                } else {
                    $('.config-size[value="128"]').prop('checked', true);
                }

                // Apply inner radius
                if (context.innerRadius !== undefined && context.innerRadius !== null) {
                    $('#config-inner-radius').val(context.innerRadius);
                }

                // Apply Structure (Wrap)
                if (context.wrap) {
                    $('#config-wrap-panel').prop('checked', true);
                    $('#config-title').val(context.title || '');
                    $('#config-footer').val(context.footer || '');
                } else {
                    $('#config-wrap-panel').prop('checked', false);
                    $('#config-title').val(''); // Clear defaults
                    $('#config-footer').val('');
                }

                updateChart();
            }

            // Event Listeners
            $('.config-type, .config-colors, .config-size').on('change', function () {
                var group = $(this).attr('class');
                $('.' + group.split(' ')[0]).not(this).prop('checked', false);
                $(this).prop('checked', true); // Ensure one is always checked
                updateChart();
            });

            $('#config-values, #config-inner-radius, #config-delimiter, #config-title, #config-footer').on('input change', function () {
                var rad = $(this).val();
                if (this.id === 'config-inner-radius') {
                    $('#radius-val').text(rad + 'px');
                }
                updateChart();
            });

            $('#config-wrap-panel').on('change', function () {
                updateChart();
            });

            // Context selector handler
            $('#chart-context-selector').on('change', function () {
                var contextKey = $(this).val();
                if (contextKey && contexts[contextKey]) {
                    applyContext(contexts[contextKey]);
                }
            });

            // Initialize
            applyContext(contexts['pie-default']);
        });
    </script>
</body>

</html>